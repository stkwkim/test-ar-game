<!DOCTYPE html>
<html>
<head>
    <title>GPSæ¸¬è©¦ç‰ˆ - ä¹é¾åŸåœŸç“œç£æ¢ç´¢ (å®Œæ•´ç‰ˆ)</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
        }
        .location-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        .btn:hover {
            background: #5a6fd8;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-hint {
            background: #ffc107;
            color: black;
        }
        .btn-video {
            background: #dc3545;
        }
        .btn-story {
            background: #17a2b8;
        }
        .btn-dev {
            background: #6c757d;
        }
        input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        .completion {
            background: #d4edda;
            color: #155724;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            display: none;
        }
        .progress-container {
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            width: 0%;
            transition: width 0.5s ease;
        }
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }
        /* å½±ç‰‡æ¨¡æ…‹æ¡†æ¨£å¼ */
        .video-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .video-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            text-align: center;
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 æ¯”ä¾‹ */
            height: 0;
            margin: 20px 0;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }
        .close-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .video-description {
            margin: 15px 0;
            color: #555;
            font-style: italic;
        }
        .ar-note {
            background: #e7f3ff;
            color: #004085;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 0.9em;
        }
        .dev-tools {
            margin-top: 30px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 8px;
        }
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }
        .hint-counter {
            font-size: 0.8em;
            color: #6c757d;
            margin-top: 5px;
            text-align: center;
        }
        /* äºŒç¶­ç¢¼æ¨£å¼ */
        .qr-code {
            margin: 20px auto;
            text-align: center;
        }
        .qr-code img {
            max-width: 200px;
            border: 2px solid #333;
            border-radius: 10px;
        }
        .qr-instruction {
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›ï¸ ä¹é¾åŸåœŸç“œç£æ¢ç´¢<br><small>å…GPSæ¸¬è©¦ç‰ˆ (å®Œæ•´åŠŸèƒ½)</small></h1>
        
        <div class="progress-container">
            <div>æ¢ç´¢é€²åº¦: <span id="progress-count">1</span>/6</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text">
                <span>å·²å®Œæˆ: <span id="progress-percent">17</span>%</span>
                <span>å‰©é¤˜: <span id="remaining-percent">83</span>%</span>
            </div>
        </div>

        <!-- åœ°é»1: ä¹é¾å¯¨åŸå…¬åœ’ -->
        <div id="location-1" class="location-card">
            <h2>ğŸ“ ä¹é¾å¯¨åŸå…¬åœ’</h2>
            <p><strong>æ•…äº‹:</strong> é€™è£¡æ›¾æ˜¯å……æ»¿å‚³å¥‡çš„ä¹é¾å¯¨åŸï¼Œä¸€å€‹åœ¨ä¸‰ä¸ç®¡åœ°å¸¶ä¸­è‡ªç„¶å½¢æˆçš„ç¨ç‰¹ç¤¾å€ã€‚æƒ³åƒä¸€ä¸‹ï¼Œåœ¨1987å¹´æ¸…æ‹†ä¹‹å‰ï¼Œé€™è£¡æ˜¯é«˜å¯†åº¦å»ºç¯‰çš„è¿·å®®ï¼Œå……æ»¿è‘—å„ç¨®æ•…äº‹å’Œå‚³å¥‡ã€‚</p>
            
            <div class="ar-note">
                ğŸ’¡ åœ¨ARç‰ˆæœ¬ä¸­ï¼Œç•¶æ‚¨åˆ°é”æ­¤åœ°é»æ™‚ï¼Œæœƒè‡ªå‹•é¡¯ç¤ºç›¸é—œçš„ARå½±ç‰‡å…§å®¹
            </div>
            
            <div class="button-group">
                <button class="btn btn-video" onclick="showVideo(1, 'history')">ğŸ¬ è§€çœ‹ä¹é¾å¯¨åŸæ­·å²å½±ç‰‡</button>
                <button class="btn btn-story" onclick="showVideo(1, 'story')">ğŸ“– æ•…äº‹é€²åº¦</button>
            </div>
            
            <p><strong>å•é¡Œ:</strong> ä¹é¾å¯¨åŸå…¬åœ’ä¿ç•™äº†æ¸…ä»£è¡™é–€çš„å“ªå€‹é‡è¦å»ºç¯‰çµæ§‹ï¼Ÿ</p>
            <input type="text" id="answer-1" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">
            
            <div class="button-group">
                <button class="btn" onclick="checkAnswer(1, 'è¡™é–€')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-hint" onclick="showHint(1)">ğŸ’¡ é¡¯ç¤ºæç¤º (<span id="hint-count-1">0</span>/3)</button>
            </div>
            
            <div class="hint-counter">é»æ“Šæç¤ºæŒ‰éˆ•ç²å¾—æ›´å¤šç·šç´¢</div>
        </div>

        <!-- åœ°é»2: åä¸‰è¡—èˆŠæ¨“ç¾¤ -->
        <div id="location-2" class="location-card" style="display:none;">
            <h2>ğŸ¢ åä¸‰è¡—èˆŠæ¨“ç¾¤</h2>
            <p><strong>æ•…äº‹:</strong> åä¸‰è¡—è¦‹è­‰äº†åœŸç“œç£çš„å·¥æ¥­ç™¼å±•å²ã€‚é€™äº›æˆ°å‰é¨æ¨“å»ºç¯‰èåˆäº†ä¸­è¥¿å»ºç¯‰é¢¨æ ¼ï¼Œæ›¾ç¶“æ˜¯ç¹è¯çš„å•†æ¥­è¡—é“ï¼Œç¾åœ¨å‰‡æ˜¯ç¤¾å€ç”Ÿæ´»çš„è¦‹è­‰ã€‚</p>
            
            <div class="ar-note">
                ğŸ’¡ åœ¨ARç‰ˆæœ¬ä¸­ï¼Œç•¶æ‚¨åˆ°é”æ­¤åœ°é»æ™‚ï¼Œæœƒè‡ªå‹•é¡¯ç¤ºç›¸é—œçš„ARå½±ç‰‡å…§å®¹
            </div>
            
            <div class="button-group">
                <button class="btn btn-video" onclick="showVideo(2, 'history')">ğŸ¬ è§€çœ‹åä¸‰è¡—æ­·å²å½±ç‰‡</button>
                <button class="btn btn-story" onclick="showVideo(2, 'story')">ğŸ“– æ•…äº‹é€²åº¦</button>
            </div>
            
            <p><strong>å•é¡Œ:</strong> åä¸‰è¡—çš„é¨æ¨“å»ºç¯‰ä¸»è¦å»ºæ–¼å“ªå€‹å¹´ä»£ï¼Ÿ</p>
            <input type="text" id="answer-2" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">
            
            <div class="button-group">
                <button class="btn" onclick="checkAnswer(2, '1950')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-hint" onclick="showHint(2)">ğŸ’¡ é¡¯ç¤ºæç¤º (<span id="hint-count-2">0</span>/3)</button>
            </div>
            
            <div class="hint-counter">é»æ“Šæç¤ºæŒ‰éˆ•ç²å¾—æ›´å¤šç·šç´¢</div>
        </div>

        <!-- åœ°é»3: åœŸç“œç£ç‰›æ£šè—è¡“æ‘ -->
        <div id="location-3" class="location-card" style="display:none;">
            <h2>ğŸ¨ åœŸç“œç£ç‰›æ£šè—è¡“æ‘</h2>
            <p><strong>æ•…äº‹:</strong> é€™è£¡æ›¾æ˜¯é¦™æ¸¯å”¯ä¸€çš„å¸‚å€å± å®°å ´ï¼Œå»ºæ–¼1908å¹´ã€‚ç¶“éæ´»åŒ–å¾Œï¼Œç´…ç£šå»ºç¯‰ç¾¤è®Šæˆäº†è—è¡“å®¶çš„å·¥ä½œå®¤å’Œå±•è¦½ç©ºé–“ï¼Œè¦‹è­‰äº†åŸå¸‚ç©ºé–“åŠŸèƒ½çš„è½‰è®Šã€‚</p>
            
            <div class="ar-note">
                ğŸ’¡ åœ¨ARç‰ˆæœ¬ä¸­ï¼Œç•¶æ‚¨åˆ°é”æ­¤åœ°é»æ™‚ï¼Œæœƒè‡ªå‹•é¡¯ç¤ºç›¸é—œçš„ARå½±ç‰‡å…§å®¹
            </div>
            
            <div class="button-group">
                <button class="btn btn-video" onclick="showVideo(3, 'history')">ğŸ¬ è§€çœ‹ç‰›æ£šè—è¡“æ‘å½±ç‰‡</button>
                <button class="btn btn-story" onclick="showVideo(3, 'story')">ğŸ“– æ•…äº‹é€²åº¦</button>
            </div>
            
            <p><strong>å•é¡Œ:</strong> ç‰›æ£šè—è¡“æ‘çš„å‰èº«æ˜¯ä»€éº¼å»ºç¯‰ï¼Ÿ</p>
            <input type="text" id="answer-3" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">
            
            <div class="button-group">
                <button class="btn" onclick="checkAnswer(3, 'å± å®°å ´')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-hint" onclick="showHint(3)">ğŸ’¡ é¡¯ç¤ºæç¤º (<span id="hint-count-3">0</span>/3)</button>
            </div>
            
            <div class="hint-counter">é»æ“Šæç¤ºæŒ‰éˆ•ç²å¾—æ›´å¤šç·šç´¢</div>
        </div>

        <!-- åœ°é»4: æµ·å¿ƒå…¬åœ’ -->
        <div id="location-4" class="location-card" style="display:none;">
            <h2>ğŸŒŠ æµ·å¿ƒå…¬åœ’</h2>
            <p><strong>æ•…äº‹:</strong> æµ·å¿ƒå…¬åœ’ä»¥ç¨ç‰¹çš„é­šå°¾çŸ³èåï¼Œé€™è£¡æ›¾ç¶“æ˜¯æµ·é‚Šï¼Œæ¼æ°‘æœƒåœ¨æ­¤ç¥ˆæ±‚å¹³å®‰ã€‚å…¬åœ’å…§é‚„æœ‰é„­æˆåŠŸçŸ³åƒï¼Œè¨´èªªè‘—é¦™æ¸¯èˆ‡æµ·æ´‹çš„æ·±åšæ·µæºã€‚</p>
            
            <div class="ar-note">
                ğŸ’¡ åœ¨ARç‰ˆæœ¬ä¸­ï¼Œç•¶æ‚¨åˆ°é”æ­¤åœ°é»æ™‚ï¼Œæœƒè‡ªå‹•é¡¯ç¤ºç›¸é—œçš„ARå½±ç‰‡å…§å®¹
            </div>
            
            <div class="button-group">
                <button class="btn btn-video" onclick="showVideo(4, 'history')">ğŸ¬ è§€çœ‹æµ·å¿ƒå…¬åœ’å½±ç‰‡</button>
                <button class="btn btn-story" onclick="showVideo(4, 'story')">ğŸ“– æ•…äº‹é€²åº¦</button>
            </div>
            
            <p><strong>å•é¡Œ:</strong> æµ·å¿ƒå…¬åœ’æœ€è‘—åçš„è‡ªç„¶æ™¯è§€æ˜¯ä»€éº¼çŸ³ï¼Ÿ</p>
            <input type="text" id="answer-4" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">
            
            <div class="button-group">
                <button class="btn" onclick="checkAnswer(4, 'é­šå°¾çŸ³')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-hint" onclick="showHint(4)">ğŸ’¡ é¡¯ç¤ºæç¤º (<span id="hint-count-4">0</span>/3)</button>
            </div>
            
            <div class="hint-counter">é»æ“Šæç¤ºæŒ‰éˆ•ç²å¾—æ›´å¤šç·šç´¢</div>
        </div>

        <!-- åœ°é»5: å®‹çš‡è‡ºå…¬åœ’ -->
        <div id="location-5" class="location-card" style="display:none;">
            <h2>ğŸ‘‘ å®‹çš‡è‡ºå…¬åœ’</h2>
            <p><strong>æ•…äº‹:</strong> é€™è£¡æ˜¯å—å®‹æœ€å¾Œå…©ä½çš‡å¸é€ƒé¿å…ƒè»çš„åœ°æ–¹ã€‚ã€å®‹çš‡è‡ºã€çŸ³åˆ»è¦‹è­‰äº†é¦™æ¸¯åœ¨ä¸­åœ‹æ­·å²ä¸­çš„é‡è¦åœ°ä½ï¼Œæ˜¯é¦™æ¸¯æœ€å¤è€çš„æ­·å²éºè·¡ä¹‹ä¸€ã€‚</p>
            
            <div class="ar-note">
                ğŸ’¡ åœ¨ARç‰ˆæœ¬ä¸­ï¼Œç•¶æ‚¨åˆ°é”æ­¤åœ°é»æ™‚ï¼Œæœƒè‡ªå‹•é¡¯ç¤ºç›¸é—œçš„ARå½±ç‰‡å…§å®¹
            </div>
            
            <div class="button-group">
                <button class="btn btn-video" onclick="showVideo(5, 'history')">ğŸ¬ è§€çœ‹å®‹çš‡è‡ºæ­·å²å½±ç‰‡</button>
                <button class="btn btn-story" onclick="showVideo(5, 'story')">ğŸ“– æ•…äº‹é€²åº¦</button>
            </div>
            
            <p><strong>å•é¡Œ:</strong> å®‹çš‡è‡ºç´€å¿µçš„æ˜¯å“ªå€‹æœä»£çš„çš‡å¸ï¼Ÿ</p>
            <input type="text" id="answer-5" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">
            
            <div class="button-group">
                <button class="btn" onclick="checkAnswer(5, 'å—å®‹')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-hint" onclick="showHint(5)">ğŸ’¡ é¡¯ç¤ºæç¤º (<span id="hint-count-5">0</span>/3)</button>
            </div>
            
            <div class="hint-counter">é»æ“Šæç¤ºæŒ‰éˆ•ç²å¾—æ›´å¤šç·šç´¢</div>
        </div>

        <!-- åœ°é»6: ç´…ç£¡è§€éŸ³å»Ÿ -->
        <div id="location-6" class="location-card" style="display:none;">
            <h2>ğŸ™ ç´…ç£¡è§€éŸ³å»Ÿ</h2>
            <p><strong>æ•…äº‹:</strong> å»ºæ–¼1873å¹´çš„ç´…ç£¡è§€éŸ³å»Ÿæ˜¯é¦™æ¸¯äºŒç´šæ­·å²å»ºç¯‰ï¼Œè¦‹è­‰äº†ç´…ç£¡åœ°å€çš„ç™¼å±•ã€‚é€™è£¡ä¸åƒ…æ˜¯å®—æ•™å ´æ‰€ï¼Œæ›´æ˜¯ç¤¾å€å‡èšçš„é‡è¦ç©ºé–“ã€‚</p>
            
            <div class="ar-note">
                ğŸ’¡ åœ¨ARç‰ˆæœ¬ä¸­ï¼Œç•¶æ‚¨åˆ°é”æ­¤åœ°é»æ™‚ï¼Œæœƒè‡ªå‹•é¡¯ç¤ºç›¸é—œçš„ARå½±ç‰‡å…§å®¹
            </div>
            
            <div class="button-group">
                <button class="btn btn-video" onclick="showVideo(6, 'history')">ğŸ¬ è§€çœ‹ç´…ç£¡è§€éŸ³å»Ÿå½±ç‰‡</button>
                <button class="btn btn-story" onclick="showVideo(6, 'story')">ğŸ“– æ•…äº‹é€²åº¦</button>
            </div>
            
            <p><strong>å•é¡Œ:</strong> ç´…ç£¡è§€éŸ³å»Ÿä¸»è¦ä¾›å¥‰å“ªä½ç¥ç¥‡ï¼Ÿ</p>
            <input type="text" id="answer-6" placeholder="è¼¸å…¥æ‚¨çš„ç­”æ¡ˆ">
            
            <div class="button-group">
                <button class="btn" onclick="checkAnswer(6, 'è§€éŸ³')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-hint" onclick="showHint(6)">ğŸ’¡ é¡¯ç¤ºæç¤º (<span id="hint-count-6">0</span>/3)</button>
            </div>
            
            <div class="hint-counter">é»æ“Šæç¤ºæŒ‰éˆ•ç²å¾—æ›´å¤šç·šç´¢</div>
        </div>

        <!-- å®Œæˆæ…¶ç¥ -->
        <div id="completion" class="completion">
            <h2>ğŸ‰ æ­å–œæ‚¨å®Œæˆæ‰€æœ‰æ¢ç´¢ï¼</h2>
            <p>æ‚¨å·²æˆåŠŸå®Œæˆä¹é¾åŸåœŸç“œç£çš„6å€‹æ­·å²åœ°é»æ¢ç´¢ï¼</p>
            
            <div class="qr-code">
                <h3>å®Œæˆçå‹µäºŒç¶­ç¢¼</h3>
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=0168" alt="å®Œæˆçå‹µäºŒç¶­ç¢¼">
                <p class="qr-instruction">æƒææ­¤äºŒç¶­ç¢¼å¯ç²å¾—æ•¸å­—ä»£ç¢¼</p>
            </div>
            
            <button class="btn btn-success" onclick="resetGame()">é‡æ–°é–‹å§‹éŠæˆ²</button>
        </div>

        <!-- é–‹ç™¼è€…å·¥å…· -->
        <div class="dev-tools">
            <h3>ğŸ”§ é–‹ç™¼è€…å·¥å…·</h3>
            <p>å¿«é€Ÿè·³è½‰åˆ°ä»»æ„åœ°é»ï¼š</p>
            <div class="button-group">
                <button class="btn btn-dev" onclick="skipToLocation(1)">åœ°é»1</button>
                <button class="btn btn-dev" onclick="skipToLocation(2)">åœ°é»2</button>
                <button class="btn btn-dev" onclick="skipToLocation(3)">åœ°é»3</button>
                <button class="btn btn-dev" onclick="skipToLocation(4)">åœ°é»4</button>
                <button class="btn btn-dev" onclick="skipToLocation(5)">åœ°é»5</button>
                <button class="btn btn-dev" onclick="skipToLocation(6)">åœ°é»6</button>
                <button class="btn btn-success" onclick="completeGame()">ç›´æ¥å®ŒæˆéŠæˆ²</button>
            </div>
        </div>
    </div>

    <!-- å½±ç‰‡æ¨¡æ…‹æ¡† -->
    <div id="video-modal" class="video-modal">
        <div class="video-content">
            <h2 id="video-title">å½±ç‰‡æ¨™é¡Œ</h2>
            <p class="video-description" id="video-description">å½±ç‰‡æè¿°å°‡é¡¯ç¤ºåœ¨é€™è£¡</p>
            
            <div class="video-container">
                <iframe id="video-player" width="560" height="315" src="" frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>
            
            <p class="ar-note">åœ¨ARç‰ˆæœ¬ä¸­ï¼Œé€™æ®µå½±ç‰‡æœƒåœ¨æ‚¨åˆ°é”åœ°é»æ™‚è‡ªå‹•æ’­æ”¾ï¼Œä¸¦èˆ‡å¯¦æ™¯çµåˆ</p>
            
            <button class="close-btn" onclick="closeVideo()">é—œé–‰å½±ç‰‡</button>
        </div>
    </div>

    <script>
        let currentLocation = 1;
        const totalLocations = 6;
        
        // æ¯å€‹åœ°é»çš„æç¤ºè¨ˆæ•¸å™¨
        const hintCounters = {
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 0,
            6: 0
        };
        
        // æ¯å€‹åœ°é»çš„å½±ç‰‡è³‡è¨Š
        const videoData = {
            1: {
                history: {
                    title: "ä¹é¾å¯¨åŸæ­·å²",
                    description: "æ¢ç´¢ä¹é¾å¯¨åŸçš„å‚³å¥‡æ­·å²ï¼Œå¾æ¸…ä»£è»äº‹è¦å¡åˆ°ç¨ç‰¹çš„åŸä¸­åŸç¤¾å€",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                },
                story: {
                    title: "ä¹é¾å¯¨åŸæ•…äº‹é€²åº¦",
                    description: "äº†è§£ä¹é¾å¯¨åŸçš„ç™¼å±•æ­·ç¨‹èˆ‡ç¤¾å€è®Šé·",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                }
            },
            2: {
                history: {
                    title: "åä¸‰è¡—èˆŠæ¨“ç¾¤æ•…äº‹", 
                    description: "äº†è§£åä¸‰è¡—æˆ°å‰é¨æ¨“å»ºç¯‰çš„æ­·å²èˆ‡å»ºç¯‰ç‰¹è‰²",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                },
                story: {
                    title: "åä¸‰è¡—ç™¼å±•æ•…äº‹",
                    description: "æ¢ç´¢åä¸‰è¡—å¾å•†æ¥­ç¹è¯åˆ°ç¤¾å€è¨˜æ†¶çš„è½‰è®Š",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                }
            },
            3: {
                history: {
                    title: "ç‰›æ£šè—è¡“æ‘è½‰å‹",
                    description: "è¦‹è­‰å¾å± å®°å ´åˆ°è—è¡“ç©ºé–“çš„è¯éº—è½‰èº«",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                },
                story: {
                    title: "ç‰›æ£šè—è¡“æ‘æ•…äº‹",
                    description: "äº†è§£ç‰›æ£šè—è¡“æ‘çš„æ´»åŒ–éç¨‹èˆ‡è—è¡“å®¶æ•…äº‹",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                }
            },
            4: {
                history: {
                    title: "æµ·å¿ƒå…¬åœ’èˆ‡é­šå°¾çŸ³å‚³èªª",
                    description: "æ¢ç´¢æµ·å¿ƒå…¬åœ’çš„è‡ªç„¶æ™¯è§€èˆ‡æ¼æ°‘æ–‡åŒ–",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                },
                story: {
                    title: "æµ·å¿ƒå…¬åœ’æ•…äº‹",
                    description: "äº†è§£æµ·å¿ƒå…¬åœ’çš„æ­·å²è®Šé·èˆ‡ç¤¾å€åŠŸèƒ½",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                }
            },
            5: {
                history: {
                    title: "å®‹çš‡è‡ºæ­·å²éºè·¡",
                    description: "è¿½æº¯å—å®‹çš‡å®¤åœ¨é¦™æ¸¯çš„æ­·å²è¹¤è·¡",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                },
                story: {
                    title: "å®‹çš‡è‡ºæ•…äº‹",
                    description: "äº†è§£å®‹çš‡è‡ºçš„æ­·å²æ„ç¾©èˆ‡æ–‡åŒ–åƒ¹å€¼",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                }
            },
            6: {
                history: {
                    title: "ç´…ç£¡è§€éŸ³å»Ÿæ–‡åŒ–",
                    description: "äº†è§£ç´…ç£¡è§€éŸ³å»Ÿçš„å»ºç¯‰ç‰¹è‰²èˆ‡ç¤¾å€åŠŸèƒ½",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                },
                story: {
                    title: "ç´…ç£¡è§€éŸ³å»Ÿæ•…äº‹",
                    description: "æ¢ç´¢ç´…ç£¡è§€éŸ³å»Ÿçš„æ­·å²èˆ‡ç¤¾å€é€£çµ",
                    youtubeId: "dQw4w9WgXcQ" // é€™æ˜¯ç¤ºä¾‹IDï¼Œè«‹æ›¿æ›ç‚ºçœŸå¯¦çš„å½±ç‰‡ID
                }
            }
        };

        // åˆå§‹åŒ–é€²åº¦é¡¯ç¤º
        updateProgress();

        function checkAnswer(locationNum, correctAnswer) {
            const userAnswer = document.getElementById('answer-' + locationNum).value.trim().toLowerCase();
            const correct = correctAnswer.toLowerCase();
            
            // æ›´å¯¬é¬†çš„ç­”æ¡ˆæª¢æŸ¥
            let isCorrect = false;
            
            // æª¢æŸ¥å®Œå…¨åŒ¹é…
            if (userAnswer === correct) {
                isCorrect = true;
            }
            // æª¢æŸ¥åŒ…å«é—œä¿‚
            else if (userAnswer.includes(correct) || correct.includes(userAnswer)) {
                isCorrect = true;
            }
            // ç‰¹æ®Šæƒ…æ³ï¼šæ•¸å­—ç­”æ¡ˆ
            else if (correct === '1950' && (userAnswer === '50å¹´ä»£' || userAnswer === 'äº”åå¹´ä»£')) {
                isCorrect = true;
            }
            
            if (isCorrect) {
                alert('âœ… ç­”æ¡ˆæ­£ç¢ºï¼æ­å–œæ‚¨å®Œæˆé€™å€‹åœ°é»çš„æ¢ç´¢ï¼');
                
                // éš±è—ç•¶å‰åœ°é»
                document.getElementById('location-' + locationNum).style.display = 'none';
                
                // æ›´æ–°é€²åº¦
                currentLocation++;
                updateProgress();
                
                if (currentLocation <= totalLocations) {
                    // é¡¯ç¤ºä¸‹ä¸€å€‹åœ°é»
                    document.getElementById('location-' + currentLocation).style.display = 'block';
                } else {
                    // å®Œæˆæ‰€æœ‰åœ°é»
                    completeGame();
                }
                
                // æ¸…ç©ºç­”æ¡ˆæ¡†
                document.getElementById('answer-' + locationNum).value = '';
                
            } else {
                alert('âŒ ç­”æ¡ˆä¸æ­£ç¢ºï¼Œè«‹å†è©¦ä¸€æ¬¡æˆ–æŸ¥çœ‹æç¤ºã€‚\n\næç¤ºï¼šç­”æ¡ˆé€šå¸¸æ˜¯1-3å€‹å­—çš„é—œéµè©ã€‚');
            }
        }

        function showHint(locationNum) {
            // å¢åŠ æç¤ºè¨ˆæ•¸
            hintCounters[locationNum]++;
            
            // æ›´æ–°æç¤ºæŒ‰éˆ•ä¸Šçš„è¨ˆæ•¸
            document.getElementById('hint-count-' + locationNum).textContent = hintCounters[locationNum];
            
            // æ ¹æ“šæç¤ºæ¬¡æ•¸é¡¯ç¤ºä¸åŒçš„æç¤º
            const hintLevel = Math.min(hintCounters[locationNum], 3);
            
            const hints = {
                1: {
                    1: 'æç¤ºï¼šç­”æ¡ˆå°±åœ¨å•é¡Œä¸­ï¼ç•™æ„ã€Œè¡™é–€ã€é€™å€‹è©ã€‚',
                    2: 'æç¤ºï¼šæ¸…ä»£è¡™é–€çš„é‡è¦å»ºç¯‰çµæ§‹å°±æ˜¯ã€Œè¡™é–€ã€æœ¬èº«ã€‚',
                    3: 'ç­”æ¡ˆï¼šè¡™é–€'
                },
                2: {
                    1: 'æç¤ºï¼šæƒ³æƒ³é¦™æ¸¯æˆ°å¾Œé‡å»ºçš„æ™‚æœŸï¼Œç­”æ¡ˆæ˜¯å››ä½æ•¸å­—ã€‚',
                    2: 'æç¤ºï¼š1950å¹´ä»£æ˜¯é¦™æ¸¯æˆ°å¾Œé‡å»ºçš„é‡è¦æ™‚æœŸã€‚',
                    3: 'ç­”æ¡ˆï¼š1950'
                },
                3: {
                    1: 'æç¤ºï¼šé€™å€‹åœ°æ–¹åŸæœ¬çš„ç”¨é€”èˆ‡ã€Œç‰›ã€æœ‰é—œï¼Œç­”æ¡ˆæ˜¯ä¸‰å€‹å­—ã€‚',
                    2: 'æç¤ºï¼šé€™è£¡åŸæœ¬æ˜¯è™•ç†ç‰›éš»çš„åœ°æ–¹ã€‚',
                    3: 'ç­”æ¡ˆï¼šå± å®°å ´'
                },
                4: {
                    1: 'æç¤ºï¼šç­”æ¡ˆå°±åœ¨å•é¡Œä¸­ï¼æ˜¯ä¸€ç¨®èˆ‡æµ·æ´‹ç”Ÿç‰©æœ‰é—œçš„çŸ³é ­ã€‚',
                    2: 'æç¤ºï¼šé€™ç¨®çŸ³é ­å½¢ç‹€åƒé­šçš„å°¾å·´ã€‚',
                    3: 'ç­”æ¡ˆï¼šé­šå°¾çŸ³'
                },
                5: {
                    1: 'æç¤ºï¼šæƒ³æƒ³ä¸­åœ‹æ­·å²ä¸­å—åŒ—å®‹çš„æ™‚æœŸï¼Œç­”æ¡ˆæ˜¯å…©å€‹å­—ã€‚',
                    2: 'æç¤ºï¼šå—å®‹æ˜¯å®‹æœçš„å¾ŒæœŸéšæ®µã€‚',
                    3: 'ç­”æ¡ˆï¼šå—å®‹'
                },
                6: {
                    1: 'æç¤ºï¼šç­”æ¡ˆå°±åœ¨å»Ÿå®‡åç¨±ä¸­ï¼',
                    2: 'æç¤ºï¼šè§€éŸ³å»Ÿä¸»è¦ä¾›å¥‰çš„å°±æ˜¯è§€éŸ³è©è–©ã€‚',
                    3: 'ç­”æ¡ˆï¼šè§€éŸ³'
                }
            };
            
            alert(hints[locationNum][hintLevel]);
            
            // å¦‚æœå·²ç¶“é¡¯ç¤ºäº†ç­”æ¡ˆï¼Œé‡ç½®æç¤ºè¨ˆæ•¸å™¨
            if (hintLevel === 3) {
                setTimeout(() => {
                    hintCounters[locationNum] = 0;
                    document.getElementById('hint-count-' + locationNum).textContent = '0';
                }, 2000);
            }
        }

        function showVideo(locationNum, videoType) {
            const videoInfo = videoData[locationNum][videoType];
            if (!videoInfo) return;
            
            // è¨­ç½®å½±ç‰‡æ¨™é¡Œå’Œæè¿°
            document.getElementById('video-title').textContent = videoInfo.title;
            document.getElementById('video-description').textContent = videoInfo.description;
            
            // è¨­ç½®YouTubeå½±ç‰‡ï¼ˆä½¿ç”¨æ‚¨æä¾›çš„å½±ç‰‡IDï¼‰
            const videoPlayer = document.getElementById('video-player');
            videoPlayer.src = `https://www.youtube.com/embed/${videoInfo.youtubeId}?autoplay=1`;
            
            // é¡¯ç¤ºå½±ç‰‡æ¨¡æ…‹æ¡†
            document.getElementById('video-modal').style.display = 'flex';
        }

        function closeVideo() {
            // éš±è—å½±ç‰‡æ¨¡æ…‹æ¡†
            document.getElementById('video-modal').style.display = 'none';
            
            // åœæ­¢å½±ç‰‡æ’­æ”¾
            const videoPlayer = document.getElementById('video-player');
            videoPlayer.src = '';
        }

        function skipToLocation(locationNum) {
            // éš±è—æ‰€æœ‰åœ°é»
            for (let i = 1; i <= totalLocations; i++) {
                document.getElementById('location-' + i).style.display = 'none';
            }
            
            // é¡¯ç¤ºæŒ‡å®šåœ°é»
            document.getElementById('location-' + locationNum).style.display = 'block';
            currentLocation = locationNum;
            updateProgress();
            
            // éš±è—å®Œæˆè¨Šæ¯
            document.getElementById('completion').style.display = 'none';
            
            alert('å·²è·³è½‰åˆ°åœ°é» ' + locationNum);
        }

        function completeGame() {
            // éš±è—æ‰€æœ‰åœ°é»
            for (let i = 1; i <= totalLocations; i++) {
                document.getElementById('location-' + i).style.display = 'none';
            }
            
            // é¡¯ç¤ºå®Œæˆè¨Šæ¯
            document.getElementById('completion').style.display = 'block';
            currentLocation = totalLocations + 1;
            updateProgress();
        }

        function resetGame() {
            // éš±è—æ‰€æœ‰åœ°é»å’Œå®Œæˆè¨Šæ¯
            for (let i = 2; i <= totalLocations; i++) {
                document.getElementById('location-' + i).style.display = 'none';
            }
            document.getElementById('completion').style.display = 'none';
            
            // é¡¯ç¤ºç¬¬ä¸€å€‹åœ°é»
            document.getElementById('location-1').style.display = 'block';
            currentLocation = 1;
            updateProgress();
            
            // æ¸…ç©ºæ‰€æœ‰ç­”æ¡ˆ
            for (let i = 1; i <= totalLocations; i++) {
                document.getElementById('answer-' + i).value = '';
                // é‡ç½®æç¤ºè¨ˆæ•¸å™¨
                hintCounters[i] = 0;
                document.getElementById('hint-count-' + i).textContent = '0';
            }
            
            alert('éŠæˆ²å·²é‡ç½®ï¼');
        }
        
        function updateProgress() {
            // æ›´æ–°é€²åº¦æ•¸å­—
            document.getElementById('progress-count').textContent = Math.min(currentLocation - 1, totalLocations);
            
            // è¨ˆç®—ç™¾åˆ†æ¯”
            const progressPercent = Math.round(((currentLocation - 1) / totalLocations) * 100);
            const remainingPercent = 100 - progressPercent;
            
            // æ›´æ–°ç™¾åˆ†æ¯”é¡¯ç¤º
            document.getElementById('progress-percent').textContent = progressPercent;
            document.getElementById('remaining-percent').textContent = remainingPercent;
            
            // æ›´æ–°é€²åº¦æ¢
            document.getElementById('progress-fill').style.width = progressPercent + '%';
        }
        
        // é»æ“Šå½±ç‰‡æ¨¡æ…‹æ¡†èƒŒæ™¯é—œé–‰å½±ç‰‡
        document.getElementById('video-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeVideo();
            }
        });
        <!-- ========= GPS è§¦å‘å½±ç‰‡æ¨¡å—ï¼ˆçº¯å‰ç«¯ï¼Œ0 æˆæœ¬ï¼‰ ========= -->
<script>
/* â‘  æ™¯ç‚¹åæ ‡ï¼ˆçœŸå® WGS84ï¼Œè‡ªå·±æ”¹ï¼‰ */
const POIS = {
  1: { name: 'ä¹é¾™å¯¨åŸå…¬å›­', lat: 22.3316,  lng: 114.1908 },
  2: { name: 'åä¸‰è¡—æ—§æ¥¼ç¾¤', lat: 22.3123,  lng: 114.1880 },
  3: { name: 'ç‰›æ£šè‰ºæœ¯æ‘',   lat: 22.3210,  lng: 114.1900 },
  4: { name: 'æµ·å¿ƒå…¬å›­',     lat: 22.3170,  lng: 114.1905 },
  5: { name: 'å®‹çš‡å°å…¬å›­',   lat: 22.3250,  lng: 114.1920 },
  6: { name: 'çº¢ç£¡è§‚éŸ³åº™',   lat: 22.3030,  lng: 114.1870 }
};

/* â‘¡ ä¸¤æ®µå½±ç‰‡ URLï¼ˆå¯æ¢ YouTube / è‡ªå»º mp4ï¼‰ */
const VIDEOS = {
  1: { story: 'https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&rel=0',
       hist:  'https://www.youtube.com/embed/dQw4w9WgXcQ?start=10&autoplay=1&rel=0' },
  2: { story: 'https://www.youtube.com/embed/AAA', hist: 'https://www.youtube.com/embed/BBB' },
  3: { story: 'https://www.youtube.com/embed/CCC', hist: 'https://www.youtube.com/embed/DDD' },
  4: { story: 'https://www.youtube.com/embed/EEE', hist: 'https://www.youtube.com/embed/FFF' },
  5: { story: 'https://www.youtube.com/embed/GGG', hist: 'https://www.youtube.com/embed/HHH' },
  6: { story: 'https://www.youtube.com/embed/III', hist: 'https://www.youtube.com/embed/JJJ' }
};

/* â‘¢ å·¥å…·ï¼šè®¡ç®—ä¸¤ç‚¹è·ç¦»ï¼ˆç±³ï¼‰ */
function dist(a, b) {
  const R = 6371000;
  const toRad = d => d * Math.PI / 180;
  const dLat = toRad(b.lat - a.lat), dLng = toRad(b.lng - a.lng);
  const la1 = toRad(a.lat), la2 = toRad(b.lat);
  const x = Math.sin(dLat/2)**2 + Math.cos(la1)*Math.cos(la2)*Math.sin(dLng/2)**2;
  return 2 * R * Math.asin(Math.sqrt(x));
}

/* â‘£ æ’­æ”¾å®¹å™¨ï¼ˆåªå»ºä¸€æ¬¡ï¼‰ */
const player = document.createElement('iframe');
player.style.cssText = 'position:fixed; inset:0; width:100%; height:100%; z-index:9999; display:none; border:none';
document.body.appendChild(player);

let playedSet = new Set();          // æ¯ç‚¹åªæ’­ä¸€æ¬¡
const TRIGGER_M = 30;               // è§¦å‘åŠå¾„ï¼ˆç±³ï¼‰

/* â‘¤ æ’­æ”¾é€»è¾‘ï¼šå…ˆ story 20s â†’ å† hist 20s â†’ å…³é—­ */
function playTwo(id) {
  if (playedSet.has(id)) return;
  playedSet.add(id);
  const {story, hist} = VIDEOS[id];
  player.style.display = 'block';
  player.src = story;
  setTimeout(() => { player.src = hist; }, 20000);
  setTimeout(() => { player.style.display = 'none'; }, 40000);
}

/* â‘¥ å®æ—¶å®šä½ï¼šèµ°åˆ°ç‚¹æ‰æ’­ */
function watch() {
  navigator.geolocation.watchPosition(
    pos => {
      const here = { lat: pos.coords.latitude, lng: pos.coords.longitude };
      Object.keys(POIS).forEach(id => {
        if (dist(here, POIS[id]) < TRIGGER_M) playTwo(Number(id));
      });
    },
    err => console.warn('GPS é”™è¯¯:', err),
    { enableHighAccuracy: true, maximumAge: 5000 }
  );
}

/* â‘¦ é¡µé¢åŠ è½½å®Œæˆåå¯åŠ¨ */
window.addEventListener('load', () => {
  if (navigator.geolocation) watch();
  else alert('æ‚¨çš„è£…ç½®ä¸æ”¯æ´ GPSï¼Œæ— æ³•ä½¿ç”¨è‡ªåŠ¨å½±ç‰‡åŠŸèƒ½ã€‚');
});
</script>
    </script>
</body>
</html>
