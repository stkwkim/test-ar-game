<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>九龍城解謎 - 關卡1</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script>
        // GPS定位設定
        AFRAME.registerComponent('gps-position', {
            schema: {latitude: {type: 'number'}, longitude: {type: 'number'}},
            init: function() {
                if (!navigator.geolocation) {
                    alert("請允許GPS定位");
                    return;
                }
                navigator.geolocation.watchPosition((position) => {
                    this.el.setAttribute('position', {
                        x: (position.coords.longitude - this.data.longitude) * 111000,
                        y: 0,
                        z: (position.coords.latitude - this.data.latitude) * 111000
                    });
                });
            }
        });
    </script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        
        <!-- GPS觸發點：九龍城寨公園 (範例坐標) -->
        <a-entity gps-position="latitude: 22.331456; longitude: 114.189234">
            <a-video 
                src="https://www.youtube.com/embed/替換你的影片ID?autoplay=1&mute=1" 
                width="5" height="3" 
                position="0 2 -5"
                rotation="0 0 0"
                visible="true">
            </a-video>
            <a-text 
                value="線索：清拆年份減去500" 
                position="0 0.5 -3" 
                align="center"
                color="yellow"
                scale="2 2 2">
            </a-text>
        </a-entity>

        <a-entity camera gps-camera></a-entity>
    </a-scene>
</body>
</html>
